{"ast":null,"code":"import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar _class, _temp2;\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\nfunction scrollTo(element, to, duration) {\n  var requestAnimationFrame = window.requestAnimationFrame || function requestAnimationFrameTimeout() {\n    return setTimeout(arguments.length <= 0 ? undefined : arguments[0], 10);\n  };\n\n  if (duration <= 0) {\n    element.scrollTop = to;\n    return;\n  }\n\n  var difference = to - element.scrollTop;\n  var perTick = difference / duration * 10;\n  requestAnimationFrame(function () {\n    element.scrollTop = element.scrollTop + perTick;\n\n    if (element.scrollTop === to) {\n      return;\n    }\n\n    scrollTo(element, to, duration - 10);\n  });\n}\n\nvar noop = function noop() {};\n\nvar TimeMenu = (_temp2 = _class = function (_React$Component) {\n  _inherits(TimeMenu, _React$Component);\n\n  function TimeMenu() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, TimeMenu);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this._menuRefHandler = function (ref) {\n      _this.menu = ref;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  TimeMenu.prototype.componentDidMount = function componentDidMount() {\n    this.scrollToSelected(0);\n  };\n\n  TimeMenu.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (prevProps.activeIndex !== this.props.activeIndex) {\n      this.scrollToSelected(120);\n    }\n  };\n\n  TimeMenu.prototype.scrollToSelected = function scrollToSelected() {\n    var duration = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var _props = this.props,\n        activeIndex = _props.activeIndex,\n        step = _props.step;\n    var targetIndex = Math.floor((activeIndex || 0) / step);\n    var firstItem = this.menu.children[targetIndex];\n    var offsetTo = firstItem.offsetTop;\n    scrollTo(this.menu, offsetTo, duration);\n  };\n\n  TimeMenu.prototype.render = function render() {\n    var _props2 = this.props,\n        prefix = _props2.prefix,\n        title = _props2.title,\n        mode = _props2.mode,\n        activeIndex = _props2.activeIndex,\n        step = _props2.step,\n        disabled = _props2.disabled,\n        disabledItems = _props2.disabledItems,\n        onSelect = _props2.onSelect;\n    var total = mode === 'hour' ? 24 : 60;\n    var list = [];\n\n    var _loop = function _loop(i) {\n      if (i % step === 0) {\n        var _classnames;\n\n        var isDisabled = disabled || disabledItems(i);\n        var itemCls = classnames((_classnames = {}, _classnames[prefix + 'time-picker-menu-item'] = true, _classnames[prefix + 'disabled'] = isDisabled, _classnames[prefix + 'selected'] = i === activeIndex, _classnames));\n        var onClick = isDisabled ? noop : function () {\n          return onSelect(i, mode);\n        };\n        list.push(React.createElement('li', {\n          key: i,\n          title: i,\n          className: itemCls,\n          onClick: onClick\n        }, i));\n      }\n    };\n\n    for (var i = 0; i < total; i++) {\n      _loop(i);\n    }\n\n    var menuTitle = title ? React.createElement('div', {\n      className: prefix + 'time-picker-menu-title'\n    }, title) : null;\n    return React.createElement('div', {\n      className: prefix + 'time-picker-menu'\n    }, menuTitle, React.createElement('ul', {\n      className: prefix + 'time-picker-menu-' + mode,\n      ref: this._menuRefHandler\n    }, list));\n  };\n\n  return TimeMenu;\n}(React.Component), _class.propTypes = {\n  prefix: PropTypes.string,\n  title: PropTypes.node,\n  mode: PropTypes.oneOf(['hour', 'minute', 'second']),\n  step: PropTypes.number,\n  activeIndex: PropTypes.number,\n  disabledItems: PropTypes.func,\n  onSelect: PropTypes.func,\n  disabled: PropTypes.bool\n}, _class.defaultProps = {\n  step: 1,\n  disabledItems: function disabledItems() {\n    return false;\n  },\n  onSelect: function onSelect() {},\n  disabled: false\n}, _temp2);\nTimeMenu.displayName = 'TimeMenu';\nexport default TimeMenu;","map":null,"metadata":{},"sourceType":"module"}